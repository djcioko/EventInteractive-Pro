<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EventInteractive Pro - Personalizabil</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { 
            background: #050505 url('https://i.ibb.co/yBWYrcHj/download-2.jpg') no-repeat center center fixed; 
            color: #ffffff; font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden;
            background-size: cover;
        }

        /* Inimioare Animate */
        .heart {
            position: absolute; color: rgba(212, 175, 55, 0.6);
            font-size: 20px; user-select: none;
            animation: moveHearts 10s linear infinite; z-index: 1;
        }
        @keyframes moveHearts {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }

        /* Interfa»õa ECRAN (Laptop) */
        #display-ui { 
            display: none; height: 100vh; flex-direction: column; 
            justify-content: center; align-items: center; position: relative; z-index: 2;
        }
        .card { 
            background: rgba(0, 0, 0, 0.85); border: 4px solid #d4af37; 
            padding: 40px 60px; border-radius: 40px; 
            max-width: 85%; min-width: 45%; word-wrap: break-word;
            box-shadow: 0 0 50px rgba(0, 0, 0, 1);
        }
        .author { font-size: 40px; color: #d4af37; margin-bottom: 20px; text-transform: uppercase; }
        .text { font-size: 75px; font-weight: bold; line-height: 1.2; }

        /* Buton SetƒÉri Fundal (Doar pe Laptop) */
        #bg-settings {
            position: fixed; bottom: 20px; right: 20px; z-index: 100;
            background: rgba(0,0,0,0.5); padding: 10px; border-radius: 10px; border: 1px solid #d4af37;
        }
        #bg-settings label { color: #d4af37; cursor: pointer; font-weight: bold; font-size: 14px; }

        /* Interfa»õa TELEFON */
        #form-ui { padding: 30px; position: relative; z-index: 10; background: #050505; min-height: 100vh; }
        .logo-text { color: #d4af37; font-size: 24px; font-weight: bold; margin-bottom: 20px; }
        input, textarea { 
            width: 90%; padding: 15px; margin: 10px 0; border-radius: 12px; 
            border: 2px solid #d4af37; background: #111; color: #fff; font-size: 18px; 
        }
        button { 
            background: linear-gradient(45deg, #d4af37, #f2d06b); color: #000; 
            padding: 20px; width: 95%; border: none; border-radius: 12px; font-weight: bold; font-size: 22px; 
        }
    </style>
</head>
<body>

    <div id="form-ui">
        <div class="logo-text">EVENT INTERACTIVE LIVE</div>
        <input type="text" id="nume" placeholder="Numele tƒÉu">
        <textarea id="mesaj" rows="4" placeholder="Scrie mesajul tƒÉu..."></textarea>
        <button onclick="trimite()">TRIMITE PE ECRAN</button>
        <p id="status" style="display:none; color:#d4af37; margin-top:15px;">‚úÖ MESAJ TRIMIS!</p>
    </div>

    <div id="display-ui">
        <div class="card">
            <div id="author-display" class="author">A»òTEPTƒÇM MESAJE...</div>
            <div id="text-display" class="text">ScaneazƒÉ codul »ôi scrie un mesaj live!</div>
        </div>
        
        <div id="bg-settings">
            <label for="upload-bg">üñºÔ∏è SCHIMBƒÇ FUNDALUL</label>
            <input type="file" id="upload-bg" accept="image/*" style="display:none;">
        </div>
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        let eventID = params.get('id') || 'test_dj';

        const firebaseConfig = {
            apiKey: "AIzaSyAs-V_E8_p8_8_8_8_8_8_8_8", 
            databaseURL: "https://felicitari-nunta-default-rtdb.firebaseio.com",
            projectId: "felicitari-nunta",
            appId: "1:102925718812:web:01f5ec325b8234133216d9"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database().ref(eventID);

        // Detectare Laptop/Telefon
        if (window.innerWidth > 800) {
            document.getElementById('display-ui').style.display = 'flex';
            document.getElementById('form-ui').style.display = 'none';
            creeazaInimioare();
        }

        // Func»õia de Upload Poza (Local)
        document.getElementById('upload-bg').addEventListener('change', function(e) {
            const reader = new FileReader();
            reader.onload = function(event) {
                document.body.style.backgroundImage = "url('" + event.target.result + "')";
            };
            reader.readAsDataURL(e.target.files[0]);
        });

        function creeazaInimioare() {
            for (let i = 0; i < 15; i++) {
                let heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = '‚ù§';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDelay = Math.random() * 10 + 's';
                document.body.appendChild(heart);
            }
        }

        function trimite() {
            const author = document.getElementById('nume').value;
            const text = document.getElementById('mesaj').value;
            if(author && text) {
                db.push({ author, text }).then(() => {
                    document.getElementById('status').style.display = 'block';
                    document.getElementById('mesaj').value = '';
                    setTimeout(() => { document.getElementById('status').style.display = 'none'; }, 3000);
                });
            }
        }

        db.on('value', (snap) => {
            const data = snap.val();
            if(data && window.innerWidth > 800) {
                const lista = Object.values(data);
                const ultimul = lista[lista.length - 1];
                document.getElementById('author-display').innerText = ultimul.author;
                document.getElementById('text-display').innerText = `"${ultimul.text}"`;
            }
        });
    </script>
</body>
</html>
